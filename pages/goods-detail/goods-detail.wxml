<view class="container">
  <!-- è½®æ’­å›¾ -->
  <view class="swiper-container">
    <swiper class="swiper" indicator-dots="{{false}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}" circular="{{true}}">
      <swiper-item class="swiper-item" wx:for="{{goods.images}}" wx:key="index">
        <image class="swiper-image" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-index="{{index}}"></image>
      </swiper-item>
    </swiper>
    <view class="indicator">{{current + 1}}/{{goods.images.length}}</view>
  </view>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="goods-info">
    <view class="goods-title">{{goods.title}}</view>
    <view class="price-container">
      <text class="price-symbol">Â¥</text>
      <text class="goods-price">{{goods.price}}</text>
    </view>
    <view class="goods-meta">
      <view class="meta-item">
        <text class="meta-label">åˆ†ç±»ï¼š</text>
        <text class="meta-value">{{goods.category}}</text>
      </view>
      <view class="meta-item">
        <text class="meta-label">å‘å¸ƒæ—¶é—´ï¼š</text>
        <text class="meta-value">{{goods.createTime}}</text>
      </view>
    </view>
    <view class="goods-tags">
      <view class="tag tag-primary" wx:if="{{goods.isNew}}">å…¨æ–°</view>
      <view class="tag tag-secondary" wx:if="{{goods.canBargain}}">å¯è®®ä»·</view>
      <view class="tag tag-warning" wx:if="{{goods.isHot}}">çƒ­é—¨</view>
    </view>
  </view>

  <!-- å–å®¶ä¿¡æ¯ -->
  <view class="seller-info">
    <view class="seller-avatar">
      <image src="{{seller.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
    </view>
    <view class="seller-detail">
      <view class="seller-name">{{seller.nickName || 'æœªçŸ¥ç”¨æˆ·'}}</view>
      <!-- æ·»åŠ å–å®¶è¯„åˆ† -->
      <view class="seller-rating" wx:if="{{seller.sellerRating}}">
        <text class="star {{seller.sellerRating >= 1 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 2 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 3 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 4 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 5 ? 'active' : ''}}">â˜…</text>
        <text class="rating-value">{{seller.sellerRating.toFixed(1)}} ({{seller.sellerReviewCount || 0}}æ¡è¯„ä»·)</text>
      </view>
      <view class="seller-rating" wx:else>
        <text class="rating-value">æš‚æ— è¯„ä»·</text>
      </view>
    </view>
    <view class="contact-seller-btn" bindtap="contactSeller">è”ç³»å–å®¶</view>
  </view>

  <!-- å•†å“è¯¦æƒ… -->
  <view class="detail-section animate-fade-in">
    <view class="section-title">å•†å“è¯¦æƒ…</view>
    <view class="goods-description">{{goods.description || 'æš‚æ— è¯¦ç»†æè¿°'}}</view>
    <view class="detail-item" wx:if="{{goods.brand}}">
      <view class="detail-label">å“ç‰Œ</view>
      <view class="detail-value">{{goods.brand}}</view>
    </view>
    <view class="detail-item" wx:if="{{goods.condition}}">
      <view class="detail-label">æˆè‰²</view>
      <view class="detail-value">{{goods.condition}}</view>
    </view>
    <view class="detail-item" wx:if="{{goods.campus}}">
      <view class="detail-label">æ ¡åŒº</view>
      <view class="detail-value">{{goods.campus}}</view>
    </view>
  </view>

  <!-- å•†å“è¯„ä»·å…¥å£ -->
  <view class="goods-reviews animate-fade-in" bindtap="viewGoodsReviews">
    <view class="reviews-title">å•†å“è¯„ä»·</view>
    <view class="reviews-summary" wx:if="{{seller.sellerRating}}">
      <view class="reviews-rating">
        <text class="star {{seller.sellerRating >= 1 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 2 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 3 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 4 ? 'active' : ''}}">â˜…</text>
        <text class="star {{seller.sellerRating >= 5 ? 'active' : ''}}">â˜…</text>
        <text class="rating-value">{{seller.sellerRating.toFixed(1)}}</text>
      </view>
      <view class="reviews-count">{{seller.sellerReviewCount || 0}}æ¡è¯„ä»·</view>
    </view>
    <view class="reviews-summary" wx:else>
      <view class="reviews-empty">æš‚æ— è¯„ä»·</view>
    </view>
    <view class="reviews-arrow">æŸ¥çœ‹å…¨éƒ¨ ></view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="action-left">
      <view class="action-icon" bindtap="toggleFavorite">
        <text class="iconfont {{isFavorite ? 'icon-favorite-filled' : 'icon-favorite'}}">{{isFavorite ? 'â¤ï¸' : 'â™¡'}}</text>
        <text class="icon-text">{{isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </view>
      <view class="action-icon" bindtap="shareGoods">
        <text class="iconfont icon-share">ğŸ”—</text>
        <text class="icon-text">åˆ†äº«</text>
      </view>
    </view>
    <view class="action-buttons">
      <button class="action-btn contact-seller" bindtap="contactSeller">è”ç³»å–å®¶</button>
      <button class="action-btn buy-now" bindtap="buyNow">ç«‹å³è´­ä¹°</button>
    </view>
  </view>
</view> 